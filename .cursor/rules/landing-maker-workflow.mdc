---
description: Landing Maker 多 Agent 工作流，创建 landing 页面时遵循此流程
alwaysApply: true
---

# Landing Maker 工作流

当用户要创建 landing 页面、产品官网、宣传页时，按以下流程执行。

## 三种设计路径（保持不变）

| 路径 | 名称 | 主导方 | 流程 |
|------|------|--------|------|
| 1 | 纯创意 | 设计大师 | 设计大师 → 前端专家 |
| 2 | 内容工具 | 前端专家 | 前端专家直接实现（可跳过设计规格） |
| 3 | 参考+创意 | 设计大师 | 用户提供参考页面 → 设计大师 → 前端专家 |

## 流程顺序

1. **入口 Agent（产品专家）** → 多轮对话挖掘需求
   - 接收产品文档（可选）：解析 PRD、品牌手册等
   - 多轮对话：渐进式提问，逐步明确需求
   - 信息融合：将文档内容与对话信息结合
   - 路径选择：引导用户选择最适合的设计路径
2. **保存需求** → 将收集到的需求整理为 `demand.md`，写入 `tests/YYYYMMDD-HHMMSS/demand.md`
3. **头脑风暴阶段**（需求挖掘完成后必须执行）：
   - **项目经理 Agent**（landing-project-manager）组织头脑风暴会议
   - **参与者**：产品专家、SEO 专家、设计大师、前端专家
   - **讨论内容**：针对 `demand.md` 中的用户需求进行多角度分析和建议
     - 产品专家：从产品角度提出内容优化建议
     - SEO 专家：从 SEO 角度提出关键词和优化建议
     - 设计大师：从设计角度提出视觉和交互建议
     - 前端专家：从实现角度提出技术可行性建议
   - **项目经理总结**：汇总各专家的建议，形成头脑风暴总结报告
   - **交付产品专家**：项目经理将总结报告交付给产品专家
   - **更新需求文档**：产品专家根据头脑风暴结果更新 `demand.md`
4. **最终确认** → 产品专家向用户展示更新后的 `demand.md`，根据反馈修正，待用户确认后再进入生成
5. **SEO 优化阶段**（用户确认 `demand.md` 后，生成前必须执行）：
   - **项目经理 Agent** 协调 SEO 专家 Agent（landing-seo-expert）
   - 基于 `demand.md` 生成关键词与 SEO 建议
   - 将 SEO 建议写入同目录下的 `seo-suggestions.md`
6. **生成阶段**（SEO 建议生成后，按所选路径执行）：
   - **项目经理 Agent** 协调各 Agent 执行任务
   - **路径 1**：项目经理协调设计大师 → 产出设计规格 → 协调前端专家实现（参考 SEO 建议）
   - **路径 2**：项目经理协调前端专家主导，直接实现（参考 SEO 建议和设计大师建议）
   - **路径 3**：项目经理协调设计大师参考后产出设计规格 → 协调前端专家实现（参考 SEO 建议）
7. **评分阶段**（生成完成后必须执行）：
   - **项目经理 Agent** 调用评分 Agent（landing-scorer）
   - 对本次生成的页面进行评分
   - 将评分报告写入同目录下的 `rating.md`
8. **合格性检查**（评分完成后必须执行）：
   - **项目经理 Agent** 检查评分结果是否达到合格标准：
     - 各大项评分：每个维度得分 ≥ 该维度满分的 80%
     - 总分：≥ 85 分
   - **若不合格**：视为未完成，进入迭代优化流程（步骤 9）
   - **若合格**：进入项目完成检查清单（步骤 8.1）
8.1. **项目完成检查清单**（合格性检查通过后必须执行）：
   - [ ] 需求挖掘完成
   - [ ] 头脑风暴完成
   - [ ] SEO 优化完成
   - [ ] 页面生成完成
   - [ ] 评分完成
   - [ ] 合格性检查通过
   - [ ] **项目复盘完成**（必须执行）
   - 所有检查项完成后，项目正式完成
9. **迭代优化流程**（仅当评分不合格时执行）：
   - **项目经理 Agent** 读取 `rating.md` 中的评分报告和优化建议
   - **项目经理 Agent** 根据优化建议，确定需要优化的 Agent：
     - **需求符合度不达标**：协调产品专家（orchestrator）检查需求理解
     - **UI/UX 规范不达标**：协调前端专家优化
     - **设计质量不达标**：协调设计大师（路径 1、3）或前端专家（路径 2）优化
     - **技术实现不达标**：协调前端专家优化
     - **SEO 质量不达标**：
       - 5.1 SEO 专家输出质量不达标：协调 SEO 专家优化 `seo-suggestions.md`
       - 5.2 前端专家实施质量不达标：协调前端专家优化页面实施
   - **项目经理 Agent** 协调相关 Agent 根据 `rating.md` 中的优化建议进行改进
   - 相关 Agent 完成优化后，生成新版本页面（`landing-v2.html`、`landing-v3.html` 等）
   - **项目经理 Agent** 返回步骤 7，重新评分
   - **重复迭代，直到评分合格为止**
   - **迭代限制**：记录迭代次数，如迭代超过 5 次仍未合格，向用户报告问题并寻求指导
10. **项目复盘阶段**（合格性检查通过后必须执行，无论是否经过迭代优化）：
    - **项目经理 Agent**（landing-project-manager）组织全体参与 Agent 进行项目复盘
    - **参与者**：产品专家、SEO 专家、设计大师、前端专家、评分 Agent
    - **复盘内容**：对项目流程各个阶段进行复盘
      - 需求挖掘阶段：产品专家的表现和不足
      - 头脑风暴阶段：各专家的参与度和建议质量
      - SEO 优化阶段：SEO 专家的输出质量和建议完整性
      - 生成阶段：设计大师和前端专家的实现质量
      - 评分阶段：评分 Agent 的评估准确性和建议有效性
      - 迭代优化阶段：各 Agent 的优化效果和响应速度
    - **问题识别**：明确各个 Agent 不足的地方
    - **能力提升建议**：输出各个 Agent 能力提高的建议
    - **技能优化**：根据复盘结果，优化各个 Agent 的技能（Skill 文件）
    - **复盘报告**：生成项目复盘报告，记录复盘结果和优化建议
    - **输出路径**：将复盘报告写入 `tests/YYYYMMDD-HHMMSS/retrospective.md`
    - **执行时机**：项目达到合格标准后立即执行，不得遗漏

## 数据收集专家工作流程（独立流程）

**数据收集专家 Agent**（landing-data-collector）作为后台知识维护流程，与主流程（路径 1/2/3）解耦运行。

### 触发方式
- **按需触发**：用户提供参考链接，要求提炼关键信息并更新知识库
- **定时触发**：定期采集最新设计趋势和案例（可选）

### 工作流程

1. **接收参考链接**：
   - 用户提供参考页面 URL 或案例链接
   - 数据收集专家接收并确认采集目标

2. **采集阶段**：
   - **获取页面内容**：使用工具获取页面完整内容
   - **确定采集目标**：根据页面类型确定要采集的内容类型（设计知识、产品知识、前端知识）
   - **选择来源**：识别页面类型和行业

3. **分析阶段**：
   - **页面结构分析**：分析页面布局、区块组织、信息架构
   - **设计特点分析**：提取设计风格、配色方案、版式规律、视觉元素
   - **内容组织分析**：分析内容结构、价值主张表达、功能描述模式
   - **技术实现分析**：分析前端实现方式、布局技术、交互效果

4. **知识提取**：
   - **设计知识提取**：提取可复用的设计模式和规律
   - **产品知识提取**：提取产品定位、价值主张、内容模板
   - **前端知识提取**：提取实现模式、代码模式、最佳实践

5. **精炼阶段**：
   - **结构化处理**：将提取的知识提炼为结构化知识点
   - **建立依赖关系**：识别知识点之间的依赖关系
   - **生成 DAG 节点**：按照知识库的 DAG 结构生成节点

6. **入库阶段**：
   - **质量检查**：检查知识点的质量和完整性
   - **更新知识库**：
     - 更新对应的 `knowledge-dag.json`（添加新节点和边）
     - 创建或更新知识文件（Markdown 格式）
     - 更新知识库的 README 和索引
   - **更新变更日志**：在对应知识库的 `CHANGELOG.md` 中记录本次更新
     - 记录新增的知识点、更新的知识点、删除的知识点
     - 记录 DAG 节点的变更（新增/删除节点和边）
     - 记录变更来源（参考链接、分析报告路径等）
   - **收集日志**：在 `.cursor/knowledge/COLLECTION_LOG.md` 中记录本次采集信息

### 输出目录结构

每次分析新的链接时，在 `analysis` 目录下创建新的文件夹，格式为 `analysis/YYYYMMDD-HHMMSS/`（使用时间戳），并将所有中间文档保存在此文件夹中：

```
analysis/
  YYYYMMDD-HHMMSS/              # 每次分析创建新文件夹
    analysis-report.md           # 详细的分析报告
    knowledge-suggestions.md     # 可入库的知识点建议
    agent-improvements.md        # Agent 能力优化建议
    source-url.txt              # 源链接（可选）
    collection-log-entry.md      # 本次采集日志条目（可选）
```

### 输出
- **分析文件夹**：在 `analysis/YYYYMMDD-HHMMSS/` 目录下保存所有中间文档
- **知识库更新**：更新对应的 DAG 知识库（产品/设计/前端）
- **收集日志**：记录采集信息和分析结果到 `.cursor/knowledge/COLLECTION_LOG.md`

### 注意事项
- **版权尊重**：采集时尊重原作者的版权，仅提取设计模式和规律，不直接复制设计
- **质量把控**：确保采集的知识质量高、准确可靠
- **结构化存储**：严格按照知识库的 DAG 结构存储
- **依赖关系**：正确建立知识点之间的依赖关系
- **避免重复**：检查是否已存在相似知识，避免重复入库

## 关键点

- **产品专家角色**：入口 Agent 以产品专家身份，通过文档解析和多轮对话深度挖掘需求
- **多轮对话**：不急于一次问完所有问题，采用渐进式提问，逐步明确需求
- **文档支持**：支持用户提交产品文档、PRD、品牌手册等，与对话信息融合
- **三条路径**：逻辑不变，始终保持清晰
- **demand.md**：记录用户需求，便于后续使用和沟通
- **头脑风暴**：需求挖掘完成后，项目经理 Agent（landing-project-manager）组织各专家进行头脑风暴，优化需求文档
- **项目经理**：项目经理 Agent 专门负责协调管理，不负责需求挖掘和具体的设计、开发、SEO 工作
- **最终确认**：生成前向用户展示更新后的 `demand.md` 并确认，用户同意后再开始
- **SEO 优化**：用户确认 `demand.md` 后，SEO 专家生成 `seo-suggestions.md`，供前端专家参考
- **输出**：`tests/YYYYMMDD-HHMMSS/`，初版 `landing.html`，调整后 `landing-v2.html` 等
- **seo-suggestions.md**：SEO 专家基于 `demand.md` 生成的 SEO 优化建议
- **rating.md**：每次生成完成后，由评分 Agent 输出并写入评分报告
- **retrospective.md**：项目完成后，由项目经理 Agent（landing-project-manager）组织复盘并输出复盘报告
- **数据收集专家**：作为后台知识维护流程，根据参考链接提炼关键信息并更新知识库，与主流程解耦运行

## 知识库使用

Landing Maker 为产品专家、设计大师和前端专家分别建立了 DAG 知识库，各 Agent 在工作过程中会主动使用知识库：

### 产品专家使用知识库

**使用时机**：
- 需求挖掘时：检索行业解决方案和需求模板
- 生成 `demand.md` 时：使用标准文字内容模板
- 头脑风暴时：提供行业最佳实践参考

**知识库位置**：`.cursor/knowledge/product-expert/`

### 设计大师使用知识库

**使用时机**：
- 设计时：检索设计语言、版式规律、配色体系
- 路径 3（参考+创意）时：快速找到相似风格的设计模板
- 头脑风暴时：提供设计角度的建议和参考

**知识库位置**：`.cursor/knowledge/design-master/`

### 前端专家使用知识库

**使用时机**：
- 实现时：检索实现模式、组件库、布局解法
- 路径 2（内容工具）时：选择合适的展示模式组织内容
- 头脑风暴时：提供技术可行性建议

**知识库位置**：`.cursor/knowledge/frontend-expert/`

### 知识库更新流程

1. **数据收集专家采集**：根据参考链接、案例、文档等采集新知识
2. **精炼处理**：将原始素材提炼为结构化知识点，生成 DAG 节点
3. **更新知识库**：更新 knowledge-dag.json 和知识文件
4. **更新变更日志**：在对应知识库的 CHANGELOG.md 中记录变更
5. **记录收集日志**：在 COLLECTION_LOG.md 中记录采集活动
6. **自动生效**：后续项目自动使用更新后的知识库

**知识库维护**：数据收集专家负责持续采集和更新知识库，形成知识积累循环
